import React, { useState } from "react";
import { FaUser } from "react-icons/fa";
import { TbUserExclamation } from "react-icons/tb";
import { useSelector, useDispatch } from "react-redux";
import { logout } from "../redux/authSlice";
import { useNavigate } from "react-router-dom";

function CareHeader({ setHandleSidebar, handleSidebar, setRightBar, rightBar }) {

  let plans = [
    "Discharge Plan",
    "Nursing plan",
    "Transition-CarePlan",
    "ICD Codes",
    "CPT Codes",
    "Medical Adherence",
  ];
  const [isDischargeToggle, setIsDishchargeToggle] = useState(true)
  const user = useSelector((state) => state.auth.value);
  const dispatch = useDispatch();
  const navigate = useNavigate();

  const handleLogout = () => {
    localStorage.removeItem("token");
    dispatch(logout());
    navigate('/');

    console.log("Logged out");
  }
  return (
    <div className=" bg-caregiverbg grid grid-cols-15 pl-4 pr-4">
      <div className="col-span-15 md:col-span-3 flex  items-center justify-between py-2">
        <div className="sm:hidden flex items-center" onClick={() => setHandleSidebar(!handleSidebar)}><span className="">Menu</span>
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" data-rtl-flip="" class="text-token-text-secondary icon-lg mx-2"><path d="M11.6663 12.6686L11.801 12.6823C12.1038 12.7445 12.3313 13.0125 12.3313 13.3337C12.3311 13.6547 12.1038 13.9229 11.801 13.985L11.6663 13.9987H3.33325C2.96609 13.9987 2.66839 13.7008 2.66821 13.3337C2.66821 12.9664 2.96598 12.6686 3.33325 12.6686H11.6663ZM16.6663 6.00163L16.801 6.0153C17.1038 6.07747 17.3313 6.34546 17.3313 6.66667C17.3313 6.98788 17.1038 7.25586 16.801 7.31803L16.6663 7.33171H3.33325C2.96598 7.33171 2.66821 7.03394 2.66821 6.66667C2.66821 6.2994 2.96598 6.00163 3.33325 6.00163H16.6663Z"></path></svg>
        </div>
        <div onClick={() => setRightBar(!rightBar)} className="cursor-pointer flex">
          <svg
            fill="green"
            viewBox="0 0 369.9130434782609 68.965792093766"
            className="looka-1j8o68f desktop clogo w-28 sm:w-40 md:w-48 h-auto fill-green-600"
          >
            <defs id="SvgjsDefs1011"></defs>
            <g
              id="SvgjsG1012"
              featurekey="S6ay6y-0"
              transform="matrix(0.5944697416259555,0,0,0.5944697416259555,0.0002290399318856106,-3.5668184497557327)"
              fill="green"
            >
              <title xmlns="http://www.w3.org/2000/svg">
                Modern Business 6 expandlines
              </title>
              <path
                xmlns="http://www.w3.org/2000/svg"
                d="M64,32c7.2,0,13-5.8,13-13S71.2,6,64,6c-7.2,0-13,5.8-13,13c0,0,0,0,0,0C51,26.2,56.8,32,64,32z M64,10c5,0,9,4,9,9  s-4,9-9,9s-9-4-9-9c0,0,0,0,0,0C55,14,59,10,64,10z"
              ></path>
              <path
                xmlns="http://www.w3.org/2000/svg"
                d="M36.8,63.2c-3.3-6.4-2.1-14.2,2.9-19.4c6.1-6.3,16.1-6.5,22.4-0.4c0.1,0.1,0.3,0.3,0.4,0.4c0.8,0.8,2.1,0.8,2.9,0  c6.1-6.3,16.1-6.5,22.4-0.4c0.1,0.1,0.3,0.3,0.4,0.4c6.3,6.6,6.3,16.9,0,23.5l-4.2,4.3c0.7,0,1.4-0.1,2-0.3c1.5-0.5,3.1-0.8,4.7-0.9  l0.3-0.3c7.8-8.1,7.8-21,0-29.1C83.8,33.5,72,32.9,64,39.7c-8-6.8-19.8-6.2-27.1,1.3c-6,6.2-7.6,15.5-3.9,23.4  C34.3,64,35.5,63.6,36.8,63.2z"
              ></path>
              <path
                xmlns="http://www.w3.org/2000/svg"
                d="M127.7,83.5c-1.1-2.6-6.7-2.3-7-2.3c-1.9,0.3-6,0.8-14.1,4.8C96.5,91,85.7,96,74,96.9c-6.5,0.6-14.4-1.9-17.6-6.3  c-0.7-0.8-0.8-2.2-0.5-2.5c0.8-1,5.6-1.6,15.3,0.9c13.2,3.7,20.1-2.9,20.9-3.8c2.5-2.3,5.7-5.8,4-8.7c-1.5-2.6-5.6-2.4-8.9-1.4  c-3.4,1-7.1,0.3-10.2-0.6c-3.4-0.9-6.7-2.2-10-3.4c-4.7-2-9.6-3.5-14.6-4.5c-8.5-1.6-17.1,0.2-25.6,5.2c-6.9,4-12.8,9.6-17.2,16.3  c-8.9,13.8-10,24.3-9.5,30.6c0.1,1.6,1.2,2.8,2.7,3.2c1.6,0.4,3.2-0.3,4.1-1.6c0.7-0.9,1.1-1.9,1.3-3c0-0.2,0.1-0.5,0.2-0.8  c0.9-3.8,3.3-7.1,6.6-9.2l0.3-0.1c4.4-2.4,8.5-0.7,17.3,3.4c3.7,1.8,8.4,3.9,14.1,6.1c26,8.9,44.2-2,55.6-10.9  c9.5-7.4,20.4-14.8,20.4-14.8C124.5,89.8,129.2,86.9,127.7,83.5z M120.6,87.5c-0.1,0.1-11.1,7.5-20.7,15  c-10.7,8.4-27.7,18.5-51.8,10.3c-5.5-2.1-9.9-4.1-13.8-5.9c-8.8-4.1-14.6-6.8-20.9-3.3l-0.1,0c-0.1,0-0.2,0.1-0.3,0.1  c-4.2,2.7-7.2,6.9-8.4,11.7c-0.1,0.6-0.3,1.3-0.5,1.9c-0.3-5.8,1.1-15,8.9-27.2c4-6.2,9.5-11.3,15.9-15c5.3-3.3,11.3-5.1,17.6-5.2  c1.8,0,3.6,0.2,5.3,0.5c4.8,1,9.4,2.5,13.9,4.4c3.3,1.3,6.8,2.6,10.4,3.6c3.5,1,8,1.9,12.4,0.6c1.3-0.5,2.7-0.6,4.1-0.4  c-0.2,0.5-0.9,1.7-3.2,3.8c0,0-0.1,0.1-0.1,0.1c-0.2,0.2-5.6,5.9-17,2.7c-10.5-2.7-17.1-2.6-19.5,0.5c-1.4,1.8-1.3,4.2,0.3,7.1  c0.1,0.1,4.7,8.8,21.3,8.2c12.4-1,23.6-6.1,34-11.3c7.6-3.8,11-4.2,12.9-4.5c0.8-0.1,1.7-0.2,2.5-0.1  C122.8,86,121.7,86.8,120.6,87.5L120.6,87.5z"
              ></path>
            </g>
            <g
              id="SvgjsG1013"
              featurekey="j5pGhi-0"
              transform="matrix(2.560820016550997,0,0,2.560820016550997,93.224431041536,-1.0781079386497883)"
              fill="green"
            >
              <path d="M15.244 7.715 l-1.1523 0.85938 q-0.9375 -1.23046875 -2.260742188 -1.860351563 t-2.9053 -0.62988 q-1.73828125 0 -3.212890625 0.830078125 t-2.29 2.2314 t-0.81543 3.1592 q0 2.646484375 1.81640625 4.262695313 t4.5801 1.6162 q3.046875 0 5.087890625 -2.3828125 l1.1523 0.86914 q-1.083984375 1.376953125 -2.705078125 2.12890625 t-3.6133 0.75195 q-3.80859375 0 -6.005859375 -2.529296875 q-1.8359375 -2.138671875 -1.8359375 -4.84375 q0 -3.173828125 2.231445313 -5.3515625 t5.5811 -2.1777 q2.03125 0 3.666992188 0.8056640625 t2.6807 2.2607 z M22.968753125 8.203 q2.470703125 0 4.1015625 1.787109375 q1.50390625 1.630859375 1.50390625 3.876953125 q0.01953125 5.546875 0 5.634765625 l-1.4551 0 l0 -2.4316 q-1.142578125 2.12890625 -4.150390625 2.3828125 q-2.4609375 0 -4.018554688 -1.674804688 t-1.5576 -3.9111 q0 -2.2265625 1.474609375 -3.8671875 q1.630859375 -1.796875 4.1015625 -1.796875 z M22.968753125 9.551 q-1.708984375 0 -2.939453125 1.26953125 t-1.2305 3.0664 q0 1.162109375 0.6298828125 2.236328125 t2.1338 1.8164 q3.76953125 0.83984375 5.361328125 -3.427734375 q0.087890625 -1.3671875 -0.29296875 -2.6171875 q-0.2734375 -0.56640625 -0.751953125 -1.07421875 q-1.201171875 -1.26953125 -2.91015625 -1.26953125 z M30.722696875 14.541 l0 -1.2891 q0.15625 -0.966796875 0.44921875 -1.572265625 q0.68359375 -1.6796875 1.8359375 -2.4609375 t1.9141 -0.78125 q0.56640625 0 1.2109375 0.37109375 l-0.71289 1.1523 q-0.908203125 -0.33203125 -1.801757813 0.537109375 t-1.2354 1.8945 q-0.25390625 0.908203125 -0.25390625 3.408203125 l0 3.623 l-1.4063 0 l0 -4.8828 z M45.95715625 15.6348 l1.1523 0.61523 q-0.556640625 1.123046875 -1.30859375 1.806640625 t-1.6895 1.04 t-2.1191 0.35645 q-2.6171875 0 -4.091796875 -1.713867188 t-1.4746 -3.8721 q0 -2.041015625 1.25 -3.6328125 q1.58203125 -2.03125 4.248046875 -2.03125 q2.724609375 0 4.365234375 2.080078125 q1.162109375 1.46484375 1.171875 3.65234375 l-9.6191 0 q0.0390625 1.875 1.19140625 3.071289063 t2.8418 1.1963 q0.8203125 0 1.591796875 -0.2880859375 t1.3135 -0.75684 t1.1768 -1.5234 z M45.95715625 12.7539 q-0.2734375 -1.103515625 -0.80078125 -1.762695313 t-1.3965 -1.0645 t-1.8262 -0.40527 q-1.572265625 0 -2.705078125 1.015625 q-0.8203125 0.7421875 -1.240234375 2.216796875 l7.9688 0 z M50.00979375 15.293 l0 -1.709 q0.17578125 -2.1875 0.91796875 -3.203125 q0.615234375 -0.927734375 1.611328125 -1.474609375 q0.654296875 -0.419921875 1.865234375 -0.44921875 q0.78125 0 1.58203125 0.29296875 t1.2402 0.78125 t0.88867 1.4648 q0.244140625 -0.625 1.025390625 -1.46484375 q0.380859375 -0.322265625 0.986328125 -0.634765625 q0.41015625 -0.263671875 1.904296875 -0.439453125 q1.11328125 0 2.138671875 0.556640625 t1.4404 1.5674 t0.41504 3.0127 l0 5.8496 l-1.4063 0 l0 -5.8496 q0 -1.71875 -0.244140625 -2.36328125 t-0.83984 -1.04 t-1.4355 -0.39551 q-1.58203125 0.107421875 -2.705078125 1.533203125 q-0.439453125 0.60546875 -0.6640625 2.685546875 l0 5.4297 l-1.377 0 l0 -5.4883 q0 -1.93359375 -0.4296875 -2.631835938 t-1.0254 -1.1133 t-1.4844 -0.41504 q-0.95703125 0 -1.645507813 0.48828125 t-1.0791 1.46 t-0.3125 3.1592 l0 4.541 l-1.3672 0 l0 -4.1504 z M73.9746125 8.203 q2.470703125 0 4.1015625 1.787109375 q1.50390625 1.630859375 1.50390625 3.876953125 q0.01953125 5.546875 0 5.634765625 l-1.4551 0 l0 -2.4316 q-1.142578125 2.12890625 -4.150390625 2.3828125 q-2.4609375 0 -4.018554688 -1.674804688 t-1.5576 -3.9111 q0 -2.2265625 1.474609375 -3.8671875 q1.630859375 -1.796875 4.1015625 -1.796875 z M73.9746125 9.551 q-1.708984375 0 -2.939453125 1.26953125 t-1.2305 3.0664 q0 1.162109375 0.6298828125 2.236328125 t2.1338 1.8164 q3.76953125 0.83984375 5.361328125 -3.427734375 q0.087890625 -1.3671875 -0.29296875 -2.6171875 q-0.2734375 -0.56640625 -0.751953125 -1.07421875 q-1.201171875 -1.26953125 -2.91015625 -1.26953125 z M92.87065625 17.0117 q0 2.255859375 -0.400390625 3.30078125 q-0.537109375 1.474609375 -1.879882813 2.270507813 t-3.2178 0.7959 q-1.38671875 0 -2.48046875 -0.390625 t-1.7871 -1.0449 t-1.2695 -1.9141 l1.4941 0 q0.615234375 1.064453125 1.577148438 1.572265625 t2.3975 0.50781 q1.40625 0 2.377929688 -0.52734375 t1.3818 -1.3184 t0.41016 -2.5684 l0 -0.54688 q-0.771484375 0.986328125 -1.899414063 1.513671875 t-2.3779 0.52734 q-1.474609375 0 -2.778320313 -0.732421875 t-2.0117 -1.9775 t-0.70801 -2.7295 t0.7373 -2.7686 t2.0459 -2.0313 t2.7441 -0.74707 q1.2109375 0 2.197265625 0.37109375 q0.830078125 0.302734375 1.962890625 1.162109375 q0.95703125 0.791015625 1.50390625 3.017578125 q-0.01953125 0.29296875 -0.01953125 4.2578125 z M87.40235625 9.531 q-1.171875 0 -2.172851563 0.56640625 t-1.5723 1.5625 t-0.57129 2.1582 q0 1.767578125 1.181640625 2.919921875 t3.0566 1.1523 q1.9140625 0 3.06640625 -1.142578125 t1.1523 -3.0078 q0 -1.2109375 -0.5322265625 -2.158203125 t-1.5039 -1.499 t-2.1045 -0.55176 z M96.279278125 4.3260000000000005 q0.46875 0 0.8056640625 0.33203125 t0.33691 0.80078 t-0.33691 0.80566 t-0.80566 0.33691 t-0.80078 -0.33691 t-0.33203 -0.80566 t0.33203 -0.80078 t0.80078 -0.33203 z M95.595678125 8.73 l1.377 0 l0 10.713 l-1.377 0 l0 -10.713 z M98.613285625 8.73 l1.6504 0 l2.832 3.9746 l2.8418 -3.9746 l1.6504 0 l-3.6719 5.0879 l4.1309 5.625 l-1.6699 0 l-3.2813 -4.502 l-3.2324 4.502 l-1.6406 0 l4.0527 -5.625 z"></path>
            </g>
          </svg>
          <span className=" sm:hidden w-5 h-5 rounded-full bg-yellow-500 text-white flex items-center justify-center text-xs font-semibold uppercase">
            {user?.first_name?.[0]}
          </span>

          {/* <FaUser className="h-4 w-4 text-gray-500" /> */}
        </div>
      </div>

      <div className="hidden col-span-15 mb-2 md:mb-0 md:col-span-8 sm:flex flex-wrap justify-between items-center lg:ml-4 lg:pr-4">
        {plans &&
          plans.map((plan, ind) =>
            ind === 0 ? (
              <div
                className="flex flex-col relative w-1/2 sm:w-1/3 md:w-auto  "
                onMouseEnter={() => setIsDishchargeToggle(false)}
                onMouseLeave={() => setIsDishchargeToggle(true)}
              >
                <p
                  key={ind}
                  // onClick={() => setIsDishchargeToggle(!isDischargeToggle)}
                  className="border border-black p-2 rounded-2xl bg-white text-xs font-semibold cursor-pointer"
                >
                  {plan}
                </p>

                {!isDischargeToggle && ind === 0 && (
                  <ul className="bg-gray-100 p-2 rounded shadow-md mt-0 text-sm absolute w-44 top-full z-10">
                    <li className="py-1 hover:bg-gray-300 cursor-pointer">
                      Discharge Plan
                    </li>
                    <li className="py-1 hover:bg-gray-300 cursor-pointer">
                      Create Discharge Plan
                    </li>
                  </ul>
                )}
              </div>
            ) : (
              <div
                key={ind}
                className="w-1/2 sm:w-1/3 md:w-auto border border-black p-2 rounded-2xl bg-white text-xs font-semibold cursor-pointer"
              >
                {plan}
              </div>
            )
          )}
      </div>
      <div className=" hidden col-span-15 mb-2 md:mb-0 md:col-span-4 sm:flex items-center justify-between md:justify-end">
        <div className="text-xs flex font-semibold mr-4 text-gray-600 ">
          <div className="border-r pr-1">
            <p>Facility Name: {user.facility_name}</p>
            <p>Beds Available: {user.beds_available}</p>
          </div>
          <div className="pl-1 pr-1">
            <p className="flex items-center gap-1">
              <FaUser />
              {user.first_name}
            </p>
            <p className="">{user.role}</p>
          </div>
        </div>

        <button
          type="button"
          onClick={handleLogout}
          className="px-4 py-2 text-sm font-medium text-white bg-red-600 cursor-pointer hover:bg-red-700 rounded-lg transition duration-200"
        >
          Logout
        </button>
      </div>
    </div>
  );
}

export default React.memo(CareHeader);
